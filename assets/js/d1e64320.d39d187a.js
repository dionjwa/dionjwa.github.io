"use strict";(self.webpackChunkdionjwa_resume_docusaurus=self.webpackChunkdionjwa_resume_docusaurus||[]).push([[2811],{2292:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>r});var o=t(1527),i=t(6213);const s={title:"Connect compute to my tasks- it\u2019s too complicated",sidebar_position:11,slug:"/cloud-compute-too-complicated"},c=void 0,l={id:"Technical/cloud-compute-too-complicated",title:"Connect compute to my tasks- it\u2019s too complicated",description:"Posted 2023-11-28",source:"@site/docs/Technical/cloud-compute-too-complicated.md",sourceDirName:"Technical",slug:"/cloud-compute-too-complicated",permalink:"/cloud-compute-too-complicated",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Connect compute to my tasks- it\u2019s too complicated",sidebar_position:11,slug:"/cloud-compute-too-complicated"},sidebar:"defaultSidebar",previous:{title:"A New Kind of Scientific Publishing",permalink:"/a-new-kind-of-scientific-publishing"},next:{title:"Cloud Compute Cannon",permalink:"/cloud-compute-cannon"}},a={},r=[{value:"We have plenty of options for connecting compute to our tasks/simulations, but they are all complicated and not easily compatible",id:"d6395cc828f44649b3e04738dfafc668",level:2},{value:"Problems",id:"7605962b12bc4f87b25b52bf767afd37",level:3},{value:"Proposed solution",id:"ac8127616c354e79870d58d9677b0517",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.mermaid,{value:'flowchart LR\n\tst["cloud data"]\n\tc["compute"]\n  u["workflows as URLs"]\n  sim["sharable simulations"]\n\n\tst --\x3e u\n\tc --\x3e u --\x3e sim\n  click st "/blob-storage-is-solved-but-what-about-compute"\n  click u "/url-configured-websites"\n  click c "/cloud-compute-too-complicated"\n  style c fill:#fff,stroke:#999999,stroke-width:2px,color:#000'}),"\n",(0,o.jsx)(n.p,{children:"Posted 2023-11-28"}),"\n",(0,o.jsx)(n.h2,{id:"d6395cc828f44649b3e04738dfafc668",children:"We have plenty of options for connecting compute to our tasks/simulations, but they are all complicated and not easily compatible"}),"\n",(0,o.jsx)(n.p,{children:"I want to run some batch compute for some tasks, it might be big, it might be small. There are so many choices, and"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"kubernetes"}),"\n",(0,o.jsx)(n.li,{children:"slurm"}),"\n",(0,o.jsx)(n.li,{children:"condor"}),"\n",(0,o.jsx)(n.li,{children:"nomad"}),"\n",(0,o.jsx)(n.li,{children:"AWS batch"}),"\n",(0,o.jsx)(n.li,{children:"Google similar thing"}),"\n",(0,o.jsx)(n.li,{children:"Azure (I don\u2019t even know but surprised if they don\u2019t have a similar thing)"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"7605962b12bc4f87b25b52bf767afd37",children:"Problems"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"they require infrastructure skills, or an institution or group that has that support"}),"\n",(0,o.jsx)(n.li,{children:"adhoc solutions do not last"}),"\n",(0,o.jsx)(n.li,{children:"the configurations are not transferable without significant work"}),"\n",(0,o.jsx)(n.li,{children:"it\u2019s unlikely that any single solution above will dominate, reducing the likelihood of simper solutions for individuals and researchers"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"ac8127616c354e79870d58d9677b0517",children:"Proposed solution"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Users do not think much about where the compute is performed. It"})," ",(0,o.jsx)(n.em,{children:(0,o.jsx)(n.strong,{children:"just works."})})]}),"\n",(0,o.jsx)(n.p,{children:"The batch compute job specification is entirely encoded in the URL. For example:"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"https:"})," // ",(0,o.jsx)(n.code,{children:"<origin>"})," / ",(0,o.jsx)(n.code,{children:"#?"})," ",(0,o.jsx)(n.code,{children:"definition=<base64 encoded JSON>"})]}),"\n",(0,o.jsx)(n.p,{children:"The definition can start with simple docker container jobs:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"job:\n  type: docker\n  image: <image-name>\n  command: run-script.sh\n  resources:\n    cpu: 1000\n    memory: 2gb\n  ttl: 1h \n"})}),"\n",(0,o.jsx)(n.p,{children:"The minimal example above is encoded in the URL. The origin can be dynamically changed, and represents the location that will handle actual executing the above job definition."}),"\n",(0,o.jsxs)(n.p,{children:["Job inputs and outputs? Handled by the ",(0,o.jsx)(n.a,{href:"https://docs.metapage.io/docs/npm-metapage",children:"metapage library"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"You can click on the link, and immediately test, and edit the definition"}),"\n",(0,o.jsxs)(n.li,{children:["Agnostic of ",(0,o.jsx)(n.em,{children:"where"})," the job is executed, as the origin can be changed without losing the definition"]}),"\n",(0,o.jsx)(n.li,{children:"The web is durable and everyone has a portal/environment (the browser) the will reliably view and execute the above definition"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The backend of exactly where the docker image is run is an implementation detail. For starting out, users can simply connect their own personal computers, test and iterate, then copy the link to a domain with access to more resources: ",(0,o.jsx)(n.a,{href:"https://docker.mtfm.io/#?tab=6",children:"https://docker.mtfm.io/#?tab=6"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},6213:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>c});var o=t(959);const i={},s=o.createContext(i);function c(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);